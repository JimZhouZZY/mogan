# 墨干理工套件 V1.2.9.5 LTS
墨干理工套件 V1.2.9.5 LTS 包含以下组件：
+ 墨干 V1.2.9.5 ( Mogan Research v1.2.9.5 LTS )

## 亮点
+ 文档格式切换至使用UTF-8编码的TMU格式，以替换采用ISO-8859-1, ISO-8859-2, ISO-8859-5, ISO-8859-7编码的TM格式
+ 改进了HTML的导入，几乎无损复制GPT生成或者大平台的数学公式和表格：
  + ChatGPT
  + Kimi
  + Zhihu
  + Wikipedia
  + ...
+ 支持Word文档（docx格式）的导出
+ 改进了文学编程相关功能的性能
+ 模板中心上线

## v1.2.9.7
### 重要更新
+ 安装包
  - 新增Fedora 41的安装包 (种子用户)
  - macOS安装包在macOS 13的Github Action上打包制作
+ 复制粘贴
  - 魔法粘贴 (`std V`)
    * 在文本模式下，粘贴纯文本
    * 在数学模式下，粘贴将LaTeX代码片段粘贴为数学公式
    * 在代码模式下，粘贴代码片段
  - 修复粘贴纯文本时，丢失换行符的问题 (在v1.2.9.3中不慎引入的问题)
  - 改进无法粘贴网络上的图像的若干情况
    * 网站没有返回200的HTTP返回码
    * 链接确实是图像，但没有后缀
  - 修复从网页粘贴文本时双引号被改为两个单引号或者反引号的问题（升级至HTML插件20241115）
+ 字体
  - 内置CMU字体和Latin Modern Math字体（为以后移除内置的 Type 1 字体做准备）
  - 改进Unicode数学字体的大型符号（比如积分符号）的排版
+ 界面
  - 新增`str =`(`Ctrl+=`或者`Command+=`)用于放大文档内容
  - 改进在只有节没有章的情况下的文档大纲显示（种子用户）
  - 针对新用户改进墨干的中文欢迎文档（帮助->欢迎）
+ 排版
  - 修复单引号和双引号的行首行末禁则不生效的问题
+ 稳定性
  - 修复粘贴二进制的TeXmacs纯文本格式崩溃的问题
  - 修复中文文档字数统计导致崩溃的问题
+ 插件
  - Julia: 改进单引号的代码高亮
  - Gnuplot
    * 支持以`%`开头特殊首行：用于控制所生成图像的排版尺寸（种子用户）
    * 默认图像格式设置为png格式
    * 在模板中心新增平面直角坐标系的详细的绘图示例（种子用户）
  - Maxima
    - 在Windows上增加Maxima启动器的可靠性 (种子用户)
    - 在macOS上检测以dmg方式安装的Maxima老版本 (种子用户)
  - Literate: 新增Goldfish代码块支持（种子用户）

### 开发者相关
+ 新增日志`$TEXMACS_HOME_PATH/system/YYYYMMDDHH.log`用于排查问题（种子用户）
+ 升级到基于S7 Scheme 11.2 (22-Nov-2024) 的金鱼Scheme v17.11.0

## v1.2.9.5
+ OSPP开源之夏
  + 修复标签页托拽会导致墨干崩溃的问题，并启用该功能
+ TMU 1.0.5: 完善并固定Herk编码和UTF-8之间的转换
+ 中文文档: 如果一个字符（U+0000~U+036F）在TeXmacs Computer Modern不存在对应字形，那么使用Noto CJK SC字体

> 注意：墨干V1.2.9正式将TMU v1.0.3设置为默认格式。墨干V1.2.9.3升级到TMU v1.0.4，仅做了一些依赖函数的重命名，兼容TMU v1.0.3。墨干V1.2.9.5升级到TMU v1.0.5，改进了UTF-8编码到Herk编码的转换，修复了TMU格式读取时存在的问题；另外按照维基百科的Cork编码表格修正了五个非常用字符（Cork+17, Cork+18, Cork+1A，Cork+DF, Cork+7F）和UTF+8的转化。TMU v1.0.5仅在这五个非常用字符上和TMU v1.0.3及v1.0.4存在不兼容的情况。

## v1.2.9.3
+ OSPP开源之夏（已经结束，做一些收尾的修复）
  + 修复`编辑->复制到->HTML`乱码的问题
  + 临时禁用标签页托拽的功能以避免托拽导致墨干崩溃
  + 修复可编辑PDF在include远程文档时无法导出的问题
+ 社区：模板中心上线
  + 访问`帮助->星球`首先加载本地文件，由用户自行选择访问官方文档还是Github镜像
  + 新增`帮助->模板`首先加载本地文件，由用户自行选择访问官方模板中心还是Github镜像
+ 排版引擎
  + 改进间隔符、双引号、单引号在文档语言为中文时的渲染
  + 修复在中英文之间添加很小的间隙时，将中文标点符当作英文从而导致中文标点符号和汉字间距略大的问题
+ 插件：
  + LaTeX插件升级到20241003：修复ieeeconf和ieeetran模板使用了非内置字体termes导致无法加粗的问题（种子用户）
  + HTML插件升级到20241003: 修复静态站点生成功能在HTML插件导出MathML数学公式时不可用的问题（种子用户）
+ 界面：
  + 新增`插入->数学公式->LaTeX align`
  + `编辑->首选项`中启用`数学`首选项

### 开发者相关
+ 内置金鱼Scheme v17.10.7
+ tbox升级到v1.7.6

## v1.2.9.2
### 重要变更
+ OSPP开源之夏
  + 多标签页功能已经默认开启
  + HTML导出大大改善，能导出docx格式的文档（需要安装pandoc）
  + Scheme/C++能借助Tree Sitter高亮，支持彩虹括号（需要开启AST syntax highligting实验选项）
+ TMU格式：开启自动保存的功能（种子用户）
+ 插件：
  + HTML导入导出的Scheme实现部分已经插件化
  + LaTeX导入导出的Scheme实现部分和论文模板已经插件化
  + Python语言支持插件化（需要手动引入`code/python.ts`才能使用`python-code`，`python-lang`等标记）
+ 用户界面
  - 语义标记高亮（`marked`）支持在焦点工具栏设置高亮颜色（种子用户）
+ 缺陷修复
  - 修复了Windows平台用户名为中文时，墨干无法被关闭的问题（种子用户）

### 开发者相关
+ 内置金鱼Scheme v17.10.6，将S7 Scheme升级至v10.12-20240816

## v1.2.9
### 重要变更
+ **TMU: 默认格式已经调整为TMU**，使用`文件->导出->TM文档`可以导出TM文档
+ 字体：在macOS和Windows上内置Noto CJK字体
+ 字体：在文档语言是中文的情况下，改善数学公式中括号等符号的渲染（开源之夏2024）
+ 多语言支持：修复法语等语言的翻译编码错乱问题
+ 默认配置：`编辑->首选项->键盘->文本中的空格键`调整为允许输入多个空格
+ Emacs风格快捷键：修复无法在数学公式中使用`Alt+[`和`Alt+]`撤销和重做的问题
+ 插件：
  - Gnuplot: 基于金鱼Scheme重新实现，不再依赖于Python
  - Goldfish: 新增sicp启动器，适合学习SICP，内置false,true,nil等兼容SICP示例代码的函数和常量
+ 社区：
  - 墨客星球：按照界面语言，选择不同的墨客星球入口

### 开发者相关
+ 内置金鱼Scheme v17.10.4，将S7 Scheme升级至v10.12-20240813
